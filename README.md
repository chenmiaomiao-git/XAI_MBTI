# XAI-MBTI 智能对话系统

基于MBTI人格的AI助手，提供文本和语音交互功能。

## 功能特点

- 基于Gradio的现代化Web界面，参考DeepSeek设计风格
- 支持文本输入和语音交互（上传音频文件或麦克风录音）
- 集成百度云ASR语音识别技术
- 集成百度云TTS语音合成技术
- 支持多种MBTI人格模型切换（ESTJ、INFP等）
- 支持不同提示词和格式选择

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行应用

```bash
python app.py
```

应用将在 `http://localhost:7860` 启动，并可通过网络访问。

## 测试服务

在启动应用前，您可以测试音频服务和聊天服务是否正常工作：

```bash
# 测试服务
./run.sh test
```

这将测试语音合成、语音识别和聊天API功能。

## 使用说明

1. **文本输入**：在输入框中输入文字，点击发送按钮或按回车键发送
2. **上传音频**：点击"➕"按钮上传音频文件，系统会自动识别语音内容并发送
3. **麦克风录音**：点击麦克风图标进行录音，完成后系统会自动识别语音内容并发送
4. **模型选择**：在右侧面板选择不同的MBTI人格模型（estj、infp、base_1、base_2）
5. **提示词选择**：选择不同的提示词模板（assist_estj、assist_infp、base）
6. **格式选择**：选择输出格式（ordinary、custom）
7. **清除对话**：点击"清除对话"按钮可以清空当前会话历史

## API接口

应用通过以下API与后端服务通信：

- 聊天接口：`http://114.215.186.130:8717/chat`
- 流式聊天接口：`http://114.215.186.130:8717/chat_stream`

## 语音技术

- 语音识别(ASR)：使用百度云语音识别服务
- 语音合成(TTS)：使用百度云语音合成服务

## 注意事项

- 麦克风录音功能需要浏览器支持并授予麦克风访问权限
- 上传的音频文件会自动转换为适合语音识别的格式
- 语音识别支持中文和英文